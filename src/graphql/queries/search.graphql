query Search($input: SearchInput!) {
  search(input: $input) {
    total
    hasMore
    currentCount
    albums {
      id
      source
      title
      releaseDate
      primaryType
      secondaryTypes
      imageUrl
      artistName
      artistCredits {
        artist {
          id
          name
        }
        role
        position
      }
      trackCount
      year
    }
    artists {
      id
      musicbrainzId
      name
      imageUrl
      cloudflareImageId
    }
    tracks {
      id
      albumId
      musicbrainzId
      title
      durationMs
      trackNumber
      searchCoverArtUrl
      searchArtistName
      album {
        id
        title
        coverArtUrl
        cloudflareImageId
      }
      artists {
        artist {
          id
          name
        }
      }
    }
    users {
      id
      name
      image
      bio
      followersCount
      followingCount
      recommendationsCount
    }
  }
}

query SearchAlbums($query: String!, $limit: Int) {
  searchAlbums(query: $query, limit: $limit) {
    id
    musicbrainzId
    title
    releaseDate
    coverArtUrl
    cloudflareImageId
    artists {
      artist {
        id
        name
      }
    }
  }
}

query SearchArtists($query: String!, $limit: Int) {
  searchArtists(query: $query, limit: $limit) {
    id
    musicbrainzId
    name
    imageUrl
    cloudflareImageId
  }
}

query SearchTracks($query: String!, $limit: Int) {
  searchTracks(query: $query, limit: $limit) {
    id
    albumId
    musicbrainzId
    title
    durationMs
    trackNumber
    album {
      id
      title
      coverArtUrl
      cloudflareImageId
    }
    artists {
      artist {
        id
        name
      }
    }
  }
}

# Admin-specific queries for music database management

query SearchAlbumsAdmin(
  $query: String
  $id: UUID
  $dataQuality: String
  $enrichmentStatus: String
  $needsEnrichment: Boolean
  $source: String
  $sortBy: String
  $sortOrder: String
  $skip: Int
  $limit: Int
) {
  searchAlbums(
    query: $query
    id: $id
    dataQuality: $dataQuality
    enrichmentStatus: $enrichmentStatus
    needsEnrichment: $needsEnrichment
    source: $source
    sortBy: $sortBy
    sortOrder: $sortOrder
    skip: $skip
    limit: $limit
  ) {
    id
    musicbrainzId
    title
    releaseDate
    coverArtUrl
    cloudflareImageId
    dataQuality
    enrichmentStatus
    lastEnriched
    needsEnrichment
    trackCount
    label
    barcode
    artists {
      artist {
        id
        name
      }
      role
    }
  }
}

query SearchArtistsAdmin(
  $query: String
  $id: UUID
  $dataQuality: String
  $enrichmentStatus: String
  $needsEnrichment: Boolean
  $sortBy: String
  $sortOrder: String
  $skip: Int
  $limit: Int
) {
  searchArtists(
    query: $query
    id: $id
    dataQuality: $dataQuality
    enrichmentStatus: $enrichmentStatus
    needsEnrichment: $needsEnrichment
    sortBy: $sortBy
    sortOrder: $sortOrder
    skip: $skip
    limit: $limit
  ) {
    id
    musicbrainzId
    name
    imageUrl
    cloudflareImageId
    dataQuality
    enrichmentStatus
    lastEnriched
    needsEnrichment
    albumCount
    trackCount
    formedYear
    countryCode
  }
}

query SearchTracksAdmin($query: String!, $skip: Int, $limit: Int) {
  searchTracks(query: $query, skip: $skip, limit: $limit) {
    id
    albumId
    musicbrainzId
    title
    trackNumber
    discNumber
    durationMs
    isrc
    album {
      id
      title
      coverArtUrl
      cloudflareImageId
    }
    artists {
      artist {
        id
        name
      }
      role
    }
  }
}

query GetDatabaseStats {
  databaseStats {
    totalAlbums
    totalArtists
    totalTracks
    albumsNeedingEnrichment
    artistsNeedingEnrichment
    recentlyEnriched
    failedEnrichments
    averageDataQuality
  }
}
