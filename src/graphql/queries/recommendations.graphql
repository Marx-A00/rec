fragment RecommendationFields on Recommendation {
  id
  score
  createdAt
  user {
    id
    username
    image
  }
  basisAlbum {
    id
    title
    coverArtUrl
    cloudflareImageId
    artists {
      artist {
        id
        name
      }
    }
  }
  recommendedAlbum {
    id
    title
    coverArtUrl
    cloudflareImageId
    artists {
      artist {
        id
        name
      }
    }
  }
}

query GetRecommendationFeed($cursor: String, $limit: Int) {
  recommendationFeed(cursor: $cursor, limit: $limit) {
    recommendations {
      ...RecommendationFields
    }
    cursor
    hasMore
  }
}

query GetMyRecommendations(
  $cursor: String
  $limit: Int
  $sort: RecommendationSort
) {
  myRecommendations(cursor: $cursor, limit: $limit, sort: $sort) {
    recommendations {
      ...RecommendationFields
    }
    cursor
    hasMore
  }
}

mutation CreateRecommendation(
  $basisAlbumId: UUID!
  $recommendedAlbumId: UUID!
  $score: Int!
) {
  createRecommendation(
    basisAlbumId: $basisAlbumId
    recommendedAlbumId: $recommendedAlbumId
    score: $score
  ) {
    id
  }
}

mutation UpdateRecommendation($id: String!, $score: Int!) {
  updateRecommendation(id: $id, score: $score) {
    id
  }
}

mutation DeleteRecommendation($id: String!) {
  deleteRecommendation(id: $id)
}

query GetRecommendation($id: String!) {
  recommendation(id: $id) {
    ...RecommendationFields
  }
}
