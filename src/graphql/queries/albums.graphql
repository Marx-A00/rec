mutation AddAlbum($input: AlbumInput!) {
  addAlbum(input: $input) {
    id
    title
    releaseDate
    coverArtUrl
    musicbrainzId
    artists {
      artist {
        id
        name
      }
    }
  }
}

# Admin-specific query for detailed album information with full metadata and tracks
query GetAlbumDetailsAdmin($id: UUID!) {
  album(id: $id) {
    id
    musicbrainzId
    title
    releaseDate
    releaseType
    genres
    trackCount
    durationMs
    coverArtUrl
    cloudflareImageId
    barcode
    label
    catalogNumber
    createdAt
    updatedAt
    dataQuality
    enrichmentStatus
    lastEnriched
    needsEnrichment
    duration
    averageRating
    inCollectionsCount
    recommendationScore
    latestLlamaLog {
      id
      status
      sources
      fieldsEnriched
      errorMessage
      createdAt
    }
    llamaLogs(limit: 5) {
      id
      operation
      sources
      status
      fieldsEnriched
      errorMessage
      durationMs
      createdAt
    }
    artists {
      artist {
        id
        name
        musicbrainzId
        imageUrl
      }
      role
      position
    }
    tracks {
      id
      musicbrainzId
      isrc
      title
      trackNumber
      discNumber
      durationMs
      explicit
      previewUrl
      createdAt
      updatedAt
      duration
      artists {
        artist {
          id
          name
        }
        role
      }
    }
  }
}

# Query to find album by MusicBrainz ID for checking if external albums exist in DB
query AlbumByMusicBrainzId($musicbrainzId: String!) {
  albumByMusicBrainzId(musicbrainzId: $musicbrainzId) {
    id
    musicbrainzId
    title
    releaseDate
    coverArtUrl
    dataQuality
    enrichmentStatus
    lastEnriched
    needsEnrichment
    artists {
      artist {
        id
        name
      }
    }
  }
}
