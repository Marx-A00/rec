query GetEnrichmentLogs(
  $entityType: EnrichmentEntityType
  $entityId: UUID
  $status: EnrichmentLogStatus
  $skip: Int
  $limit: Int
  $includeChildren: Boolean
) {
  enrichmentLogs(
    entityType: $entityType
    entityId: $entityId
    status: $status
    skip: $skip
    limit: $limit
    includeChildren: $includeChildren
  ) {
    id
    entityType
    entityId
    operation
    sources
    status
    reason
    fieldsEnriched
    dataQualityBefore
    dataQualityAfter
    errorMessage
    errorCode
    durationMs
    apiCallCount
    metadata
    createdAt
    jobId
    parentJobId
  }
}

query GetEnrichmentLogsWithChildren(
  $entityType: EnrichmentEntityType
  $entityId: UUID
  $status: EnrichmentLogStatus
  $skip: Int
  $limit: Int
) {
  enrichmentLogs(
    entityType: $entityType
    entityId: $entityId
    status: $status
    skip: $skip
    limit: $limit
    includeChildren: true
  ) {
    id
    entityType
    entityId
    operation
    sources
    status
    reason
    fieldsEnriched
    dataQualityBefore
    dataQualityAfter
    errorMessage
    errorCode
    durationMs
    apiCallCount
    metadata
    createdAt
    jobId
    parentJobId
    children {
      id
      entityType
      entityId
      operation
      sources
      status
      reason
      fieldsEnriched
      errorMessage
      errorCode
      durationMs
      apiCallCount
      createdAt
      jobId
      parentJobId
    }
  }
}

query GetEnrichmentStats(
  $entityType: EnrichmentEntityType
  $timeRange: TimeRangeInput
) {
  enrichmentStats(entityType: $entityType, timeRange: $timeRange) {
    totalAttempts
    successCount
    failedCount
    noDataCount
    skippedCount
    averageDurationMs
    sourceStats {
      source
      attempts
      successRate
    }
  }
}

mutation TriggerAlbumEnrichment(
  $id: UUID!
  $priority: EnrichmentPriority
  $force: Boolean
) {
  triggerAlbumEnrichment(id: $id, priority: $priority, force: $force) {
    success
    jobId
    message
  }
}

mutation TriggerArtistEnrichment(
  $id: UUID!
  $priority: EnrichmentPriority
  $force: Boolean
) {
  triggerArtistEnrichment(id: $id, priority: $priority, force: $force) {
    success
    jobId
    message
  }
}

mutation BatchEnrichment(
  $ids: [UUID!]!
  $type: EnrichmentType!
  $priority: EnrichmentPriority
) {
  batchEnrichment(ids: $ids, type: $type, priority: $priority) {
    success
    jobsQueued
    message
  }
}

mutation PreviewAlbumEnrichment($id: UUID!) {
  previewAlbumEnrichment(id: $id) {
    success
    message
    matchScore
    matchedEntity
    sources
    fieldsToUpdate {
      field
      currentValue
      newValue
      source
    }
    enrichmentLogId
    rawData
  }
}

mutation PreviewArtistEnrichment($id: UUID!) {
  previewArtistEnrichment(id: $id) {
    success
    message
    matchScore
    matchedEntity
    sources
    fieldsToUpdate {
      field
      currentValue
      newValue
      source
    }
    enrichmentLogId
    rawData
  }
}
