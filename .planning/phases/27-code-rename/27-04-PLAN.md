---
phase: 27-code-rename
plan: 04
type: execute
wave: 4
depends_on: ["27-02", "27-03"]
files_modified:
  - src/components/admin/EnrichmentLogTable.tsx
  - src/components/admin/EnrichmentTimeline.tsx
  - src/components/admin/EnrichmentTimelineModal.tsx
  - src/components/admin/EnrichmentTree.tsx
  - src/components/admin/ExpandableJobRow.tsx
  - src/components/admin/enrichment-timeline-utils.tsx
  - src/components/albumDetails/AlbumAdminActions.tsx
  - src/components/artistDetails/ArtistAdminActions.tsx
  - src/app/admin/music-database/page.tsx
autonomous: true

must_haves:
  truths:
    - "Admin components use useGetLlamaLogsQuery hook"
    - "Components render data.llamaLogs instead of data.enrichmentLogs"
    - "All EnrichmentLog type annotations replaced with LlamaLog"
  artifacts:
    - path: "src/components/admin/EnrichmentLogTable.tsx"
      provides: "Log table using LlamaLog types"
      contains: "useGetLlamaLogsQuery"
    - path: "src/components/admin/EnrichmentTimeline.tsx"
      provides: "Timeline using LlamaLog types"
      contains: "LlamaLog"
  key_links:
    - from: "src/components/admin/EnrichmentLogTable.tsx"
      to: "src/generated/graphql.ts"
      via: "import useGetLlamaLogsQuery"
      pattern: "import.*useGetLlamaLogsQuery.*from.*generated"
    - from: "src/components/admin/EnrichmentTimeline.tsx"
      to: "src/generated/graphql.ts"
      via: "import LlamaLog type"
      pattern: "import.*LlamaLog.*from.*generated"
---

<objective>
Update all admin components to use LlamaLog types and generated hooks.

Purpose: Components must use the regenerated GraphQL hooks and types from Plan 02. This completes the UI layer updates.
Output: All admin components compile and render log data correctly using LlamaLog types.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-code-rename/27-02-SUMMARY.md
@.planning/phases/27-code-rename/27-03-SUMMARY.md

@src/components/admin/EnrichmentLogTable.tsx
@src/components/admin/EnrichmentTimeline.tsx
@src/components/admin/EnrichmentTimelineModal.tsx
@src/components/admin/EnrichmentTree.tsx
@src/components/admin/ExpandableJobRow.tsx
@src/components/admin/enrichment-timeline-utils.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update admin log table and timeline components</name>
  <files>
    src/components/admin/EnrichmentLogTable.tsx
    src/components/admin/EnrichmentTimeline.tsx
    src/components/admin/EnrichmentTimelineModal.tsx
    src/components/admin/enrichment-timeline-utils.tsx
  </files>
  <action>
  Update main admin components:

  **src/components/admin/EnrichmentLogTable.tsx:**
  1. Update hook import:
     - `useGetEnrichmentLogsQuery` -> `useGetLlamaLogsQuery`
     - `useGetEnrichmentLogsWithChildrenQuery` -> `useGetLlamaLogsWithChildrenQuery` (if used)
  
  2. Update type imports:
     - `EnrichmentLog` -> `LlamaLog`
     - `EnrichmentLogStatus` -> `LlamaLogStatus`
     - Add `LlamaLogCategory` import if displaying category column
  
  3. Update hook usage:
     - `useGetEnrichmentLogsQuery({...})` -> `useGetLlamaLogsQuery({...})`
  
  4. Update data access:
     - `data?.enrichmentLogs` -> `data?.llamaLogs`
  
  5. Update type annotations:
     - `log: EnrichmentLog` -> `log: LlamaLog`
  
  6. Optionally add category column to display (can defer to Phase 31 for UI polish)

  **src/components/admin/EnrichmentTimeline.tsx:**
  1. Same updates as EnrichmentLogTable
  2. Update props type if passing EnrichmentLog[]

  **src/components/admin/EnrichmentTimelineModal.tsx:**
  1. Same updates as above
  2. This is a wrapper component - may have minimal changes

  **src/components/admin/enrichment-timeline-utils.tsx:**
  1. Update type imports: `EnrichmentLog` -> `LlamaLog`
  2. Update function parameter types
  3. This file contains utility functions used by timeline components
  </action>
  <verify>
  - `grep "useGetLlamaLogsQuery" src/components/admin/EnrichmentLogTable.tsx` returns match
  - `grep "LlamaLog" src/components/admin/EnrichmentTimeline.tsx` returns match
  - `grep "EnrichmentLog" src/components/admin/EnrichmentLogTable.tsx` returns empty
  - `grep "enrichmentLogs" src/components/admin/EnrichmentLogTable.tsx` returns empty (except comments)
  </verify>
  <done>Log table and timeline components use LlamaLog types and hooks</done>
</task>

<task type="auto">
  <name>Task 2: Update tree and row components</name>
  <files>
    src/components/admin/EnrichmentTree.tsx
    src/components/admin/ExpandableJobRow.tsx
  </files>
  <action>
  Update supporting admin components:

  **src/components/admin/EnrichmentTree.tsx:**
  1. Update type imports: `EnrichmentLog` -> `LlamaLog`
  2. Update props interface
  3. Update internal type references
  4. This component renders hierarchical job trees

  **src/components/admin/ExpandableJobRow.tsx:**
  1. Update type imports: `EnrichmentLog` -> `LlamaLog`
  2. Update props interface
  3. Update any GraphQL hook usage
  4. This component renders individual job rows with expand/collapse
  </action>
  <verify>
  - `grep "LlamaLog" src/components/admin/EnrichmentTree.tsx` returns match
  - `grep "LlamaLog" src/components/admin/ExpandableJobRow.tsx` returns match
  - `grep "EnrichmentLog" src/components/admin/EnrichmentTree.tsx` returns empty
  - `grep "EnrichmentLog" src/components/admin/ExpandableJobRow.tsx` returns empty
  </verify>
  <done>Tree and row components use LlamaLog types</done>
</task>

<task type="auto">
  <name>Task 3: Update detail page admin actions and run final type check</name>
  <files>
    src/components/albumDetails/AlbumAdminActions.tsx
    src/components/artistDetails/ArtistAdminActions.tsx
    src/app/admin/music-database/page.tsx
  </files>
  <action>
  Update remaining component files:

  **src/components/albumDetails/AlbumAdminActions.tsx:**
  1. Update type imports: `EnrichmentLog` -> `LlamaLog`
  2. Update data access: `enrichmentLogs` -> `llamaLogs`
  3. This component shows admin actions on album detail pages

  **src/components/artistDetails/ArtistAdminActions.tsx:**
  1. Same updates as album version
  2. Update any GraphQL hook usage

  **src/app/admin/music-database/page.tsx:**
  1. Update any EnrichmentLog imports
  2. Update component references if needed
  3. This is the main admin database page

  After all updates, run final type check:

  ```bash
  pnpm type-check
  ```

  All files should compile without errors. If any remain:
  1. Check error messages
  2. Fix missing type imports or renamed properties
  3. Re-run type-check until clean
  </action>
  <verify>
  - `pnpm type-check` exits with code 0 (no errors)
  - `grep -r "EnrichmentLog" src/components/` returns empty (except comments and potentially file names)
  - `grep -r "enrichmentLogs" src/components/` returns empty (except comments)
  </verify>
  <done>All component files pass TypeScript type checking, no EnrichmentLog references remain</done>
</task>

</tasks>

<verification>
1. All components updated:
   - Log table uses useGetLlamaLogsQuery
   - Timeline uses LlamaLog type
   - Tree and row components use LlamaLog
   - Admin action components updated

2. No stale references:
   - `grep -r "EnrichmentLog" src/components/` shows no matches (except file names, comments)
   - `grep -r "useGetEnrichmentLogsQuery" src/` shows no matches

3. TypeScript compiles:
   - `pnpm type-check` passes
   - No type errors in any source files

4. Data access updated:
   - All `data?.enrichmentLogs` changed to `data?.llamaLogs`
</verification>

<success_criteria>
- All admin components use LlamaLog types
- All generated hook calls updated (useGetLlamaLogsQuery)
- All data access paths updated (data.llamaLogs)
- `pnpm type-check` passes with zero errors
- No EnrichmentLog references remain in component code
</success_criteria>

<output>
After completion, create `.planning/phases/27-code-rename/27-04-SUMMARY.md`
</output>
